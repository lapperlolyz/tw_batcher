(function(e){function t(t){for(var i,n,c=t[0],r=t[1],o=t[2],d=0,v=[];d<c.length;d++)n=c[d],Object.prototype.hasOwnProperty.call(s,n)&&s[n]&&v.push(s[n][0]),s[n]=0;for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i]);u&&u(t);while(v.length)v.shift()();return l.push.apply(l,o||[]),a()}function a(){for(var e,t=0;t<l.length;t++){for(var a=l[t],i=!0,c=1;c<a.length;c++){var r=a[c];0!==s[r]&&(i=!1)}i&&(l.splice(t--,1),e=n(n.s=a[0]))}return e}var i={},s={app:0},l=[];function n(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=i,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(a,i,function(t){return e[t]}.bind(null,i));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],r=c.push.bind(c);c.push=t,c=c.slice();for(var o=0;o<c.length;o++)t(c[o]);var u=r;l.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"209e":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var i=a("2b0e"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("v-app",{staticStyle:{"background-color":"#f2f2f2"}},[a("v-app-bar",{attrs:{flat:"",app:""}},[a("v-row",[a("v-col",{staticClass:"pl-0"},[a("v-card",{staticClass:"pa-4",attrs:{height:"60"}},[a("div",{staticClass:"d-flex align-center justify-space-between"},[a("v-menu",{attrs:{"offset-y":"","close-on-click":"","close-on-content-click":""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-btn",e._g({attrs:{color:"primary",dark:"",small:""}},i),[e._v(" Действия ")])]}}])},[a("v-list",[a("v-list-item",{on:{click:e.getResources}},[e._v(" Обновить данные ")]),a("v-list-item",{on:{click:e.openMassEditDialog}},[e._v(" Изменить ресурсы ")]),a("resource-duplicate-dialog",{attrs:{resources:e.resourcesSelected},on:{success:e.getResources},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-list-item",e._g({},i),[e._v(" Копировать ресурсы ")])]}}])}),a("field-replace-dialog",{attrs:{resources:e.resourcesSelected},on:{success:e.getResources},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-list-item",e._g({},i),[e._v(" Замена значения в поле ")])]}}])})],1)],1),a("v-btn",{attrs:{small:""},on:{click:e.openMassEditDialog}},[a("v-icon",{staticClass:"me-2",attrs:{small:""}},[e._v(" mdi-pencil ")]),e._v(" Изменить ")],1),a("v-menu",{attrs:{"offset-y":"","close-on-content-click":!1},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-btn",e._g({attrs:{color:"secondary",dark:"",small:""}},i),[e._v(" Фильтры ")])]}}])},[a("v-card",{staticClass:"pa-4"},[a("v-row",[a("v-col",[e._v(" Фильтры "),a("v-btn",{staticClass:"ml-3",attrs:{"x-small":"",dark:"",color:"primary"},on:{click:e.addFilter}},[a("v-icon",{attrs:{"x-small":""}},[e._v("mdi-plus")])],1)],1)],1),e._l(e.filters,(function(t,i){return a("v-row",{key:t.field},[a("v-col",{staticClass:"py-0"},[a("v-autocomplete",{attrs:{label:"Поле",dense:"",items:e.fields,"item-text":"text","item-value":"value"},model:{value:e.filters[i].field,callback:function(t){e.$set(e.filters[i],"field",t)},expression:"filters[i].field"}})],1),a("v-col",{staticClass:"py-0"},[a("v-select",{attrs:{label:"Оператор",dense:"",items:e.operators},model:{value:e.filters[i].operator,callback:function(t){e.$set(e.filters[i],"operator",t)},expression:"filters[i].operator"}})],1),a("v-col",{staticClass:"py-0"},[a("v-text-field",{attrs:{label:"Значение",dense:""},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getResources(t)}},model:{value:e.filters[i].value,callback:function(t){e.$set(e.filters[i],"value",t)},expression:"filters[i].value"}})],1),a("v-col",{attrs:{cols:"auto"}},[a("v-switch",{staticClass:"mt-0 pt-0",attrs:{dense:""},model:{value:t.active,callback:function(a){e.$set(t,"active",a)},expression:"f.active"}})],1),a("v-col",{attrs:{cols:"auto"}},[a("v-icon",{on:{click:function(a){e.filters.splice(e.filters.indexOf(t),1)}}},[e._v("mdi-trash-can-outline")])],1)],1)}))],2)],1)],1)])],1),a("v-col",[a("v-card",{staticClass:"pa-3",attrs:{height:"60"}},[a("v-select",{staticClass:"ma-0 pa-0",staticStyle:{"font-size":"12px"},attrs:{items:e.contexts,"item-text":"name","item-value":"key","hide-details":"",placeholder:"Контекст",clearable:""},on:{change:e.refresh,"click:clear":e.refresh},model:{value:e.contextFilter,callback:function(t){e.contextFilter=t},expression:"contextFilter"}})],1)],1),a("v-col",[a("v-card",{staticClass:"pa-3",attrs:{height:"60"}},[a("v-select",{staticClass:"ma-0 pa-0",staticStyle:{"font-size":"12px"},attrs:{items:e.templates,"item-text":"templatename","item-value":"id","hide-details":"",placeholder:"Шаблон",clearable:""},on:{change:e.refresh,"click:clear":e.refresh},model:{value:e.templateFilter,callback:function(t){e.templateFilter=t},expression:"templateFilter"}})],1)],1),a("v-col",{staticClass:"pr-0"},[a("v-card",{staticClass:"pa-3",attrs:{height:"60"}},[a("div",{staticClass:"d-flex align-center"},[a("v-text-field",{staticClass:"pt-0 mt-0 mr-1",staticStyle:{"font-size":"12px"},attrs:{placeholder:"Поиск","hide-details":"",clearable:"",disabled:!!e.filters.length},on:{"click:clear":e.refresh,keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getResources(t)}},model:{value:e.searchField,callback:function(t){e.searchField=t},expression:"searchField"}}),a("v-btn",{staticClass:"primary",attrs:{dark:"",small:""},on:{click:e.getResources}},[a("v-icon",[e._v("mdi-magnify")])],1)],1)])],1)],1)],1),a("v-content",[a("v-card",{staticClass:"my-4"},[a("v-card",{staticClass:"ma-0 pt-1",staticStyle:{"font-size":"11px"},attrs:{flat:"",id:"rebatcher-before-resource-table"}},[a("v-row",[a("v-col",{staticClass:"py-0",attrs:{cols:"auto"}},[a("div",{staticClass:"d-flex align-center px-4 py-2 fill-height"},[e._v(" Выбрано: "+e._s(e.resourcesSelected.length)+" ")])]),a("v-col",{staticClass:"py-0"},[a("div",{staticClass:"d-flex align-center px-4 py-2 fill-height"},[a("div",{staticClass:"mx-3",staticStyle:{"white-space":"nowrap"}},[a("v-autocomplete",{staticStyle:{"font-size":"inherit"},attrs:{label:"Поля",items:e.fields,multiple:"","hide-details":"",dense:"","return-object":""},scopedSlots:e._u([{key:"selection",fn:function(t){t.item;var i=t.index;return[0===i?a("div",{staticClass:"mr-4"},[e._v(" Выбрано: "+e._s(e.fieldsSelected.length)+" ")]):e._e()]}}]),model:{value:e.fieldsSelected,callback:function(t){e.fieldsSelected=t},expression:"fieldsSelected"}})],1),a("div",{staticClass:"mx-3",staticStyle:{"white-space":"nowrap"}},[a("v-autocomplete",{staticStyle:{"font-size":"inherit"},attrs:{label:"TV-поля",items:e.tvs,hint:e.tvsSelected.map((function(e){return e.caption})).join(", "),"item-text":"name",multiple:"","persistent-hint":"","return-object":"","hide-details":"",dense:""},on:{blur:e.getResources},scopedSlots:e._u([{key:"selection",fn:function(t){t.item;var i=t.index;return[0===i?a("div",[e._v(" Выбрано: "+e._s(e.tvsSelected.length)+" ")]):e._e()]}}]),model:{value:e.tvsSelected,callback:function(t){e.tvsSelected=t},expression:"tvsSelected"}})],1)])]),a("v-col",{staticClass:"py-0"},[a("div",{staticClass:"d-flex justify-end align-center px-4 py-2 fill-height"},[a("div",{staticClass:"mx-3",staticStyle:{"white-space":"nowrap"}},[e._v("Всего: "+e._s(e.pagination.total))]),a("v-text-field",{staticClass:"align-center mt-0",staticStyle:{"max-width":"120px","font-size":"inherit"},attrs:{dense:"",value:e.pagination.itemsPerPage,"hide-details":""},on:{change:e.changeItemsPerPage},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("div",{staticStyle:{"white-space":"nowrap"}},[e._v("На странице:")])]},proxy:!0}])})],1)])],1),a("v-divider",{staticClass:"my-1"})],1),a("v-data-table",{attrs:{id:"rebatcher-resource-table",loading:e.loading,headers:e.tableHeaders,items:e.resources,page:e.pagination.page,"items-per-page":e.pagination.itemsPerPage,"server-items-length":e.pagination.total,"sort-by":e.sort.sortBy,"sort-desc":e.sort.sortDesc,"show-select":"",dense:""},on:{"update:page":[function(t){return e.$set(e.pagination,"page",t)},e.getResources],"update:itemsPerPage":function(t){return e.$set(e.pagination,"itemsPerPage",t)},"update:items-per-page":[function(t){return e.$set(e.pagination,"itemsPerPage",t)},e.getResources],"update:sortBy":function(t){return e.$set(e.sort,"sortBy",t)},"update:sort-by":[function(t){return e.$set(e.sort,"sortBy",t)},e.getResources],"update:sortDesc":function(t){return e.$set(e.sort,"sortDesc",t)},"update:sort-desc":[function(t){return e.$set(e.sort,"sortDesc",t)},e.getResources],"page-count":function(t){e.pagination.pageCount=t}},scopedSlots:e._u([{key:"item.id",fn:function(t){var i=t.item;return[a("a",{attrs:{href:"/manager/?a=resource/update&id="+i.id,target:"_blank"}},[e._v(e._s(i.id))])]}},e._l(e.fieldsEditable,(function(t){return{key:e.dynamicSlotName(t.value),fn:function(e){var i=e.item;return[a("field-edit-dialog",{key:t.value,attrs:{field:t,item:i}})]}}})),e._l(e.tvsSelected,(function(t){return{key:e.dynamicSlotName("tv_"+t.name),fn:function(e){var i=e.item;return[a("tv-edit-dialog",{key:t.name,attrs:{tv:t,item:i}})]}}})),{key:"item.btn_view",fn:function(t){var i=t.item;return[a("a",{staticStyle:{"text-decoration":"none"},attrs:{href:"/"+i.uri,target:"_blank"}},[a("v-tooltip",{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-icon",e._g({attrs:{dense:""}},i),[e._v("mdi-eye-outline")])]}}],null,!0)},[e._v(" "+e._s("/"+i.uri)+" ")])],1)]}}],null,!0),model:{value:e.resourcesSelected,callback:function(t){e.resourcesSelected=t},expression:"resourcesSelected"}})],1),a("v-dialog",{attrs:{"max-width":"600"},model:{value:e.dialogs.massEditDialog.active,callback:function(t){e.$set(e.dialogs.massEditDialog,"active",t)},expression:"dialogs.massEditDialog.active"}},[a("v-card",{staticClass:"pa-4"},[a("v-card-title",[e._v("Изменить ресурсы")]),a("v-card-text",[a("div",{staticClass:"my-6"},[a("div",{staticClass:"d-flex justify-space-between align-center"},[a("div",{staticClass:"display-1"},[e._v("Поля")]),a("v-icon",{on:{click:e.addMassEditField}},[e._v("mdi-plus")])],1),e._l(e.dialogs.massEditDialog.fields,(function(t){return a("div",{key:t.field},[a("v-row",[a("v-col",{staticClass:"py-2"},[a("v-autocomplete",{attrs:{label:"Поле",items:e.fields,"item-text":"value","hide-details":"",dense:""},model:{value:t.field,callback:function(a){e.$set(t,"field",a)},expression:"f.field"}})],1),a("v-col",{staticClass:"py-2"},[a("v-text-field",{attrs:{label:"Значение","hide-details":"",dense:""},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"f.value"}})],1),a("v-col",{attrs:{cols:"auto"}},[a("v-icon",{on:{click:function(a){e.dialogs.massEditDialog.fields.splice(e.dialogs.massEditDialog.fields.indexOf(t),1)}}},[e._v("mdi-trash-can-outline")])],1)],1)],1)}))],2),a("div",{staticClass:"my-6"},[a("div",{staticClass:"d-flex justify-space-between align-center"},[a("div",{staticClass:"display-1"},[e._v("Tv-поля")]),a("v-icon",{on:{click:e.addMassEditTv}},[e._v("mdi-plus")])],1),e._l(e.dialogs.massEditDialog.tvs,(function(t){return a("div",{key:t.field},[a("v-row",[a("v-col",{staticClass:"py-2"},[a("v-autocomplete",{attrs:{label:"Tv-поле",items:e.tvs,"item-text":"name","item-value":"id","hide-details":"",dense:""},model:{value:t.field,callback:function(a){e.$set(t,"field",a)},expression:"tv.field"}})],1),a("v-col",{staticClass:"py-2"},[a("v-text-field",{attrs:{label:"Значение","hide-details":"",dense:""},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"tv.value"}})],1),a("v-col",{attrs:{cols:"auto"}},[a("v-icon",{on:{click:function(a){e.dialogs.massEditDialog.tvs.splice(e.dialogs.massEditDialog.tvs.indexOf(t),1)}}},[e._v("mdi-trash-can-outline")])],1)],1)],1)}))],2),a("div",{staticClass:"mt-6"},[a("v-btn",{attrs:{block:"",color:"primary",dark:""},on:{click:e.sendMassEditForm}},[e._v("Отправить ")])],1)])],1)],1),a("v-snackbar",{attrs:{color:e.snackbar.color,timeout:2e3},model:{value:e.snackbar.active,callback:function(t){e.$set(e.snackbar,"active",t)},expression:"snackbar.active"}},[e._v(e._s(this.snackbar.text)+" ")])],1)],1)],1)},l=[],n=(a("99af"),a("4de4"),a("4160"),a("d81d"),a("b0c0"),a("d3b7"),a("ac1f"),a("841c"),a("159b"),a("96cf"),a("1da1")),c=a("bc3a"),r=a.n(c),o="100",u={all:[{text:"id",value:"id",width:o,default:1,immutable:1},{text:"template",value:"template",width:o,type:"list",binding:"templates",itemText:function(e){return"".concat(e.templatename," (").concat(e.id,")")},itemValue:"id",default:1},{text:"context_key",value:"context_key",type:"list",binding:"contexts",itemText:function(e){return"".concat(e.name," (").concat(e.key,")")},itemValue:"key",default:1},{text:"pagetitle",value:"pagetitle",default:1},{text:"alias",value:"alias"},{text:"alias_visible",value:"alias_visible",width:o},{text:"cacheable",value:"cacheable"},{text:"class_key",value:"class_key"},{text:"content",value:"content"},{text:"contentType",value:"contentType"},{text:"content_dispo",value:"content_dispo"},{text:"content_type",value:"content_type"},{text:"createdby",value:"createdby"},{text:"createdon",value:"createdon"},{text:"deleted",value:"deleted"},{text:"deletedby",value:"deletedby"},{text:"deletedon",value:"deletedon"},{text:"description",value:"description"},{text:"donthit",value:"donthit"},{text:"editedby",value:"editedby"},{text:"editedon",value:"editedon"},{text:"hidemenu",value:"hidemenu"},{text:"hide_children_in_tree",value:"hide_children_in_tree"},{text:"introtext",value:"introtext"},{text:"isfolder",value:"isfolder"},{text:"link_attributes",value:"link_attributes"},{text:"longtitle",value:"longtitle"},{text:"menuindex",value:"menuindex"},{text:"menutitle",value:"menutitle"},{text:"parent",value:"parent",width:o},{text:"privatemgr",value:"privatemgr"},{text:"privateweb",value:"privateweb"},{text:"properties",value:"properties"},{text:"published",value:"published",width:o},{text:"publishedby",value:"publishedby"},{text:"publishedon",value:"publishedon"},{text:"pub_date",value:"pub_date"},{text:"richtext",value:"richtext",width:o},{text:"searchable",value:"searchable"},{text:"show_in_tree",value:"show_in_tree",width:o},{text:"type",value:"type"},{text:"unpub_date",value:"unpub_date"},{text:"uri",value:"uri"},{text:"uri_override",value:"uri_override"}]};u.default=u.all.filter((function(e){return e.default}));var d=u,v=["=","!=",">","<",">=","<=","IN","NOT IN","LIKE","NOT LIKE","BETWEEN","IS NULL","IS NOT NULL"],p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{"max-width":"320"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[e._t("activator",null,{on:a})]}}],null,!0),model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[a("v-card",[a("v-card-title",[e._v("Копирование ресурсов")]),a("v-card-text",[a("v-row",[a("v-col",[a("v-list",{attrs:{dense:""}},e._l(e.resources,(function(t){return a("v-card",{key:t.id,staticClass:"mb-1",attrs:{tile:""}},[a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",[e._v(e._s(t.pagetitle))]),a("v-list-item-subtitle",[e._v("#"+e._s(t.id))])],1)],1)],1)})),1)],1)],1),a("v-divider",{staticClass:"my-3"}),a("v-row",[a("v-col",[a("v-text-field",{attrs:{label:"Цели (через запятую)",dense:"",outlined:""},model:{value:e.parents,callback:function(t){e.parents=t},expression:"parents"}})],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",text:"",disabled:0===e.parents.length},on:{click:e.submit}},[e._v("Применить")])],1)],1)],1)},f=[],m=(a("1276"),{name:"ResourceDuplicateDialog",props:{resources:{type:Array,required:!0}},data:function(){return{active:!1,parents:""}},methods:{submit:function(){var e=this;r.a.post("/assets/components/rebatcher/connectors/duplicate.php",{resources:this.resources.map((function(e){return e.id})),parents:this.parents.split(",").map((function(e){return parseInt(e)}))}).then((function(){e.active=!1,e.parents="",e.$emit("success")}))}}}),h=m,g=a("2877"),x=Object(g["a"])(h,p,f,!1,null,"6113bb34",null),b=x.exports,y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-menu",{attrs:{"close-on-content-click":!1,"close-on-click":!1},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("span",e._g({staticClass:"column-value"},i),[e._v(e._s(e.oldValue))])]}}]),model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[a("v-card",[a("v-card-title",[e._v(" Изменить поле "+e._s(e.field.text||e.field.value)+" ")]),a("v-card-text",["list"===e.field.type&&void 0!==e.field.binding?[a("v-autocomplete",{attrs:{items:e.$store.getters[e.field.binding],"item-text":e.field.itemText,"item-value":e.field.itemValue},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})]:[a("v-text-field",{attrs:{label:"Значение"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})]],2),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{text:""},on:{click:e.cancel}},[e._v("Отмена")]),a("v-btn",{attrs:{text:"",color:"primary",disabled:e.value===e.oldValue},on:{click:e.submit}},[e._v("Сохранить")])],1)],1)],1)},_=[],k={name:"FieldEditDialog",props:{field:{type:Object,required:!0},item:{type:Object,required:!0}},data:function(){return{active:!1,value:"",oldValue:""}},computed:{formData:function(){return{data:[{id:this.item.id,fields:[{field:this.field.value,value:this.value}]}]}}},methods:{setValue:function(){var e=this.item[this.field.value];this.value=e,this.oldValue=e},submit:function(){var e=this;r.a.post("/assets/components/rebatcher/connectors/batch_update.php",this.formData).then((function(){e.oldValue=e.value,e.active=!1,e.$emit("success")}))},cancel:function(){this.value=this.oldValue,this.active=!1}},watch:{item:function(){this.setValue()}},mounted:function(){this.setValue()}},w=k,S=(a("9a07"),Object(g["a"])(w,y,_,!1,null,"7529b603",null)),C=S.exports,E=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{"max-width":"640"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[e._t("activator",null,{on:a})]}}],null,!0),model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[a("v-card",[a("v-card-title",[e._v("Замена")]),a("v-card-text",[a("v-row",[a("v-col",[a("v-autocomplete",{attrs:{label:"Поле",dense:"",outlined:"",items:e.fields,"item-text":"text","item-value":"value","hide-details":""},model:{value:e.selectedField,callback:function(t){e.selectedField=t},expression:"selectedField"}})],1)],1),a("v-row",[a("v-col",[a("v-textarea",{attrs:{label:"Что заменить",dense:"",outlined:"","hide-details":""},model:{value:e.find,callback:function(t){e.find=t},expression:"find"}}),a("v-row",[a("v-col",[a("v-checkbox",{attrs:{label:"Регулярное выражение","hide-details":""},model:{value:e.isRegExp,callback:function(t){e.isRegExp=t},expression:"isRegExp"}})],1),a("v-col",[a("v-checkbox",{attrs:{label:"Учитывать регистр",disabled:e.isRegExp,"hide-details":""},model:{value:e.isCaseSensitive,callback:function(t){e.isCaseSensitive=t},expression:"isCaseSensitive"}})],1)],1)],1)],1),a("v-row",[a("v-col",[a("v-textarea",{attrs:{label:"На что заменить",dense:"",outlined:"","hide-details":""},model:{value:e.replace,callback:function(t){e.replace=t},expression:"replace"}})],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",text:"",disabled:!e.valid},on:{click:e.submit}},[e._v("Применить")])],1)],1)],1)},D=[],F=(a("7db0"),a("5319"),{name:"FieldReplaceDialog",props:{resources:{required:!0}},data:function(){return{active:!1,find:"",isRegExp:!1,isCaseSensitive:!0,replace:"",fields:d.all,selectedField:void 0}},computed:{valid:function(){return this.find.length>0&&this.selectedField&&this.resources.length&&(!this.isRegExp||"/"===this.find[0])}},methods:{submit:function(){var e=this;r.a.post("/assets/components/rebatcher/connectors/findreplace.php",{data:{resources:this.resources.map((function(e){return e.id})),field:this.selectedField,find:this.find,replace:this.replace,is_regexp:this.isRegExp,is_case_sensitive:this.isCaseSensitive,confirm:!1}}).then((function(){e.active=!1,e.$emit("success")}))}}}),R=F,P=Object(g["a"])(R,E,D,!1,null,"7eade994",null),$=P.exports,O=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-menu",{attrs:{"close-on-content-click":!1,"close-on-click":!1},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("span",e._g({staticClass:"column-value"},i),[e._v(e._s(e.oldValue))])]}}]),model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[a("v-card",[a("v-card-title",[e._v(" Изменить TV-поле "+e._s(e.tv.name)+" ")]),a("v-card-text",[a("v-text-field",{attrs:{label:"Значение"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{text:""},on:{click:e.cancel}},[e._v("Отмена")]),a("v-btn",{attrs:{text:"",color:"primary",disabled:e.value===e.oldValue},on:{click:e.submit}},[e._v("Сохранить")])],1)],1)],1)},j=[],T={name:"TvEditDialog",props:{tv:{type:Object,required:!0},item:{type:Object,required:!0}},data:function(){return{active:!1,value:"",oldValue:""}},computed:{formData:function(){return{data:[{id:this.item.id,tvs:[{field:this.tv.id,value:this.value}]}]}}},methods:{setValue:function(){var e=this.item["tv_".concat(this.tv.name)];this.value=e,this.oldValue=e},submit:function(){var e=this;r.a.post("/assets/components/rebatcher/connectors/batch_update.php",this.formData).then((function(){e.oldValue=e.value,e.active=!1,e.$emit("success")}))},cancel:function(){this.value=this.oldValue,this.active=!1}},watch:{item:function(){this.setValue()}},mounted:function(){this.setValue()}},V=T,M=(a("7861"),Object(g["a"])(V,O,j,!1,null,"366e991d",null)),N=M.exports,I={name:"App",components:{ResourceDuplicateDialog:b,FieldReplaceDialog:$,FieldEditDialog:C,TvEditDialog:N},data:function(){return{loading:!1,searchField:"",templateFilter:null,contextFilter:null,headers:[{text:"id",value:"id",width:"75",align:"center"},{text:"tpl",value:"template",width:"75",align:"center"},{text:"pagetitle",value:"pagetitle"}],resources:[],resourcesSelected:[],fields:d.all,fieldsSelected:d.default,operators:v,tvs:[],tvsSelected:[],filters:[],pagination:{page:1,pageCount:0,itemsPerPage:10,total:null},sort:{sortBy:[],sortDesc:[]},dialogs:{massEditDialog:{active:!1,fields:[],tvs:[],addValue:!1,addDelimiter:"||"}},snackbar:{active:!1,text:"",color:""}}},computed:{tableHeaders:function(){var e=this.fieldsSelected,t=this.tvsSelected.map((function(e){return{text:e.caption?e.caption:e.name,value:"tv_"+e.name}})),a=[{text:"",value:"btn_view",width:"50"}];return e.concat(t,a)},fieldsEditable:function(){return this.fieldsSelected.filter((function(e){return!e.immutable}))},contexts:function(){return this.$store.getters.contexts},templates:function(){return this.$store.getters.templates}},methods:{dynamicSlotName:function(e){return"item.".concat(e)},log:function(e){console.log(e)},getResources:function(){var e=this;return new Promise((function(t){var a,i;e.loading=!0,e.resourcesSelected=[];var s=e.pagination.page,l=e.pagination.itemsPerPage,n={limit:-1!==l?l:0,offset:s>0?s-1:0};e.sort.sortBy.length&&(n.sort=[],e.sort.sortBy.forEach((function(t,a){n.sort.push([t,e.sort.sortDesc[a]])}))),e.filters.length?n.filters=e.filters.filter((function(e){return e.active})):(null===(a=e.searchField)||void 0===a?void 0:a.length)&&(n.search=e.searchField),(null===(i=e.contextFilter)||void 0===i?void 0:i.length)&&(n.context_key=e.contextFilter),null!==e.templateFilter&&(n.template=e.templateFilter),e.tvsSelected.length&&(n.tvs=e.tvsSelected.map((function(e){return e.name}))),r.a.post("/assets/components/rebatcher/connectors/resources.php",{data:n}).then((function(a){e.resources=a.data.data,e.pagination.total=a.data.total,e.loading=!1,t()}))}))},getTVs:function(){var e=this;return new Promise((function(t){r.a.get("/assets/components/rebatcher/connectors/tvs.php").then((function(a){e.tvs=a.data,t()}))}))},addFilter:function(){this.filters.push({active:!0,field:"",operator:"",value:""})},openMassEditDialog:function(){if(!this.resourcesSelected.length)return this.snackbar.active=!0,this.snackbar.color="error",void(this.snackbar.text="Не выбраны ресуры");this.dialogs.massEditDialog.active=!0},addMassEditField:function(){this.dialogs.massEditDialog.fields.push({field:"",value:""})},addMassEditTv:function(){this.dialogs.massEditDialog.tvs.push({field:"",value:""})},sendMassEditForm:function(){var e=this,t=this.resourcesSelected.map((function(t){return{id:t.id,fields:e.dialogs.massEditDialog.fields,tvs:e.dialogs.massEditDialog.tvs}})),a={data:t};r.a.post("/assets/components/rebatcher/connectors/batch_update.php",a).then((function(t){console.log(t.data),e.dialogs.massEditDialog.active=!1,e.getResources()}))},changeItemsPerPage:function(e){var t=parseInt(e);t&&(this.pagination.itemsPerPage=t)},refresh:function(){var e=this;setTimeout((function(){return e.getResources()}),150)}},mounted:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return window.rebatcherApp=e,t.next=3,e.$store.dispatch("init");case 3:return t.next=5,e.getTVs();case 5:return t.next=7,e.getResources();case 7:case"end":return t.stop()}}),t)})))()}},B=I,z=(a("cf25"),Object(g["a"])(B,s,l,!1,null,null,null)),q=z.exports,L=a("ce5b"),A=a.n(L),H=(a("bf40"),a("fcf4"));i["default"].use(A.a);var J={theme:{themes:{light:{primary:H["a"].indigo.darken4}}}},K=new A.a(J),U=a("2f62");i["default"].use(U["a"]);var W=new U["a"].Store({state:{ready:!1,contexts:[],templates:[]},mutations:{setContexts:function(e,t){e.contexts=t.contexts},setTemplates:function(e,t){e.templates=t.templates},setAppReady:function(e){e.ready=!0}},actions:{getContexts:function(e){var t=e.commit;return new Promise((function(e){r.a.get("/assets/components/rebatcher/connectors/contexts.php").then((function(a){t("setContexts",{contexts:a.data}),e()}))}))},getTemplates:function(e){var t=e.commit;return new Promise((function(e){r.a.get("/assets/components/rebatcher/connectors/templates.php").then((function(a){t("setTemplates",{templates:[{id:0,templatename:"Не задан"}].concat(a.data)}),e()}))}))},init:function(e){return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.commit,i=e.dispatch,t.next=3,i("getContexts");case 3:return t.next=5,i("getTemplates");case 5:a("setAppReady");case 6:case"end":return t.stop()}}),t)})))()}},getters:{ready:function(e){return e.ready},contexts:function(e){return e.contexts},templates:function(e){return e.templates}}});i["default"].config.productionTip=!1,window.rebatcher=new i["default"]({store:W,vuetify:K,render:function(e){return e(q)}}).$mount("#app")},7861:function(e,t,a){"use strict";var i=a("209e"),s=a.n(i);s.a},"9a07":function(e,t,a){"use strict";var i=a("9c94"),s=a.n(i);s.a},"9c94":function(e,t,a){},cf25:function(e,t,a){"use strict";var i=a("fea6"),s=a.n(i);s.a},fea6:function(e,t,a){}});
//# sourceMappingURL=app.042be92f.js.map